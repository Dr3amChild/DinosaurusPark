services:
  fakesmtp:
    image: mailhog/mailhog:latest
    networks:
      default: null
    ports:
    - published: 1025
      target: 1025
    - published: 8025
      target: 8025
  lecta.contentmanagement.host_1:
    build:
      context: C:\Sourses\DinoPark
      dockerfile: src/Lecta.ContentManagement.Host/Dockerfile
    depends_on:
    - fakesmtp
    - lectacontentmanagementapistub
    - minio
    - mongo
    - rabbit
    - redis
    environment:
      ASPNETCORE_ENVIRONMENT: Development
      LECTA_API__Controlwork__KEY: ignored
      LECTA_API__Controlwork__URI: http://lectacontentmanagementapistub:5003
      LECTA_API__CoursesService__KEY: a189e96a-86da-49ba-aee9-164fef521e56
      LECTA_API__CoursesService__URI: https://api.stage.cognita.ru
      LECTA_API__EKSMO__KEY: 431ffabe68186298fff1c93eaeed7f23
      LECTA_API__EKSMO__URI: http://lectacontentmanagementapistub:5003
      LECTA_API__ROSUCHEBNIK__KEY: jMgwFcVxjU1puvmtVCgvHb3bugQ4cn
      LECTA_API__ROSUCHEBNIK__URI: http://lectacontentmanagementapistub:5003
      LECTA_AUTH__KEY__EXPONENT: AQAB
      LECTA_AUTH__KEY__MODULUS: 0ptWMkLtlm/6dAB262NKQn6dl7mcAfpgY4fC5FbHqlHT9SJGMtRZqZhT8lnvJlNd9ppWKKprq3YDmQnEISbb5xrd1v8Sf9vOtC9YYj4YPbLGPn6WxuPX1mxcK5uk/tbcqKJAPgqzGYNzxZdy/J/7lePG7zYIFnYj/ol9Vw0dccv8Zlb458PrDZ8glHHlijQpNJDzFBfHc+XckVwda32QGxvLlKJJkfGbnRg9ezv4R5CrXndZ6L5ByeDU4tMdPnoegZrUxqEyxpV/u2tnJCGkvH5EfVns/fU3/UBsUJS8wlBtw+jOo9U8mAVSmV4q8g6Tp7C/J5WHr4Blju53VLI+bQ==
      LECTA_BUS__PASSWORD: guest
      LECTA_BUS__QUEUENAME: Lecta.ContentManagement
      LECTA_BUS__URI: rabbitmq://rabbit
      LECTA_BUS__USERNAME: guest
      LECTA_DB__NAME: content
      LECTA_DB__URI: mongodb://mongo
      LECTA_IMPORT__RETRYCOUNT: 2
      LECTA_NOTIFICATOR__SMTPSERVER__HOST: fakesmtp
      LECTA_NOTIFICATOR__SMTPSERVER__PORT: 1025
      LECTA_NOTIFICATOR__SMTPSERVER__SENDERADDRESS: noreply@fake.com
      LECTA_NOTIFICATOR__SMTPSERVER__SENDERLOGIN: noreply
      LECTA_NOTIFICATOR__SMTPSERVER__SENDERPASSWORD: password
      LECTA_NOTIFICATOR__SPA__HOST: http://localhost
      LECTA_PRINTCONFIGONSTART: "true"
      LECTA_REDIS__CONNECTIONSTRING: redis:6379,abortConnect=false
      LECTA_REDIS__PREFIX: ContentManagementQueue
      LECTA_S3__AccessKey: admin
      LECTA_S3__Buckets__Classwork: classwork
      LECTA_S3__Buckets__Dtk: dtk
      LECTA_S3__Buckets__QualificationCourse: qualificationcourse
      LECTA_S3__Buckets__Tutor: tutor
      LECTA_S3__SecretAccessKey: adminadmin
      LECTA_S3__ServiceURL: http://minio:9000
      LECTA_SERILOG__MINIMUMLEVEL: Information
      LECTA_SERILOG__USING__0: Serilog.Sinks.Console
      LECTA_SERILOG__WRITETO__0__NAME: Console
      LECTA_URLS: http://+:80
    image: lectacontentmanagementhost
    ports:
    - published: 5002
      target: 80
    volumes:
    - c:\temp\contentmanagement:/data:rw
  lectacontentmanagementapistub:
    build:
      context: C:\Sourses\DinoPark
      dockerfile: tests/ApiStub/Dockerfile
    image: lectacontentmanagementapistub
    ports:
    - published: 5003
      target: 5003
  minio:
    command: server /data
    environment:
      MINIO_ACCESS_KEY: admin
      MINIO_SECRET_KEY: adminadmin
    image: minio/minio
    ports:
    - published: 9000
      target: 9000
    volumes:
    - minio_data:/data:rw
  mongo:
    image: mongo
    ports:
    - published: 27017
      target: 27017
    volumes:
    - mongodatacatalog:/data/:rw
  rabbit:
    image: rabbitmq:3-management
    ports:
    - published: 5672
      target: 5672
    - published: 15672
      target: 15672
  redis:
    image: redis
    ports:
    - published: 6379
      target: 6379
version: '3.4'
volumes:
  minio_data: {}
  mongodatacatalog: {}